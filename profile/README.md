# WeatherWear
<img src="https://file.notion.so/f/f/83c75a39-3aba-4ba4-a792-7aefe4b07895/8d75ca45-6c1b-438b-aeb1-d7ee14b6a3a0/1.jpg?table=block&id=bf1f7ee6-9206-4982-b7bf-60211dc05a98&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&expirationTimestamp=1723881600000&signature=Ij18XWOmws8w_h_mYDgxVgdk-mViF7Kz7sjuMYWTXow&downloadName=1.jpg" width="700px;" alt=""/>


## 🌈 팀원 소개
<table>

  <tbody>
    	<tr>
		  <td align="center">프로필</td>
	          <td align="center">이메일</td>
		<td align="center">담당 업무</td>
		  <td align="center" colspan="2">개발 기간</td>
	 </tr>	 
    <tr>
      <td align="center">
	      <a href="https://github.com/seunghyeonlee9661" target="_blank">
	      <img src="" width="200px;" alt=""/>
	      <br />
	      <sub><b>이승현 BE(Team Leader)</b></sub>
	      </a>
	      <br />
       	      </td>
        <td align="left">
	   dltmdgus9661@gmail.com
     	    </td>
      <td align="left">
	    :purple_heart: 1 <br />
	    :purple_heart: 2 <br />
	    :purple_heart: 3 <br />
     	    </td>
      <td align="center" rowspan="10">
	    2024.07.19 ~ 2023.08.16 (약 4주)
      </td>
   <tr/>
   <tr>
      <td align="center">
	      <a href="https://github.com/summereuna" target="_blank">
	      <img src="" width="200px;" alt=""/>
	      <br />
	      <sub><b>정은화 FE(Deputy team leader)</b></sub>
	      </a>
	      <br />
       	      </td>
	   <td align="left">
	   summereuna@gmail.com
     	    </td>
      <td align="left">
	    :purple_heart: 1 <br />
	    :purple_heart: 2 <br />
     	    </td>
   <tr/>
   <tr>
      <td align="center">
	      <a href="https://github.com/HaJunyoung" target="_blank">
	      <img src="" alt=""/>
	      <br />
	      <sub><b>하준영 BE(Team Member)</b></sub>
	      </a>
	      <br />
       	      </td>
      <td align="left">
	   arizona19973@naver.com
     	    </td>
      <td align="left">
	    :purple_heart: 1 <br />
	    :purple_heart: 2 <br />
     	    </td>
   <tr/>
   <tr>
      <td align="center">
	      <a href="https://github.com/HanBeom98" target="_blank">
	      <img src="" alt=""/>
	      <br />
	      <sub><b>조한범 BE(Team Member)</b></sub>
	      </a>
	      <br />
       	      </td>
      <td align="left">
	   carry9691@gmail.com
     	    </td>
      <td align="left">
	    :purple_heart: 1 <br />
	    :purple_heart: 2 <br />
     	    </td>
   <tr/>
   <tr>
      <td align="center">
	      <a href="https://github.com/GoGeunWoo" target="_blank">
	      <img src="" alt=""/>
	      <br />
	      <sub><b>고근우 FE(Team Member)</b></sub>
	      </a>
	      <br />
       	      </td>
      <td align="left">
	   gkw0314@naver.com
     	    </td>
      <td align="left">
	    :purple_heart: 1 <br />
	    :purple_heart: 2 <br />
     	    </td>
   <tr/>
  </tbody>
</table>


## ⛈️ **패션과 날씨,이제** 웨더웨어**에서 한 번에!**

**웨더웨어**는 **날씨를 기반으로 개인 맞춤형 옷차림 추천 서비스를 제공하는 패션 커뮤니티**입니다.

사용자들과 함께 OOTD(outfit of the day, 오늘의 옷차림) 패션 스타일을 공유하고,
오늘의 날씨에 딱 맞는 나만의 특별한 OOTD로 스타일리시하게 하루를 시작해보세요!

## ⛈️ 웨더웨어(WeatherWear) 사이트
<a href="https://weatherwearclothing.com/" target="_blank"> <img src="https://file.notion.so/f/f/83c75a39-3aba-4ba4-a792-7aefe4b07895/f004baeb-f3cb-456a-b7e7-b17736573ab0/wwlogo.jpg?table=block&id=725a4242-7f98-40bc-8758-c8dc7873a92b&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&expirationTimestamp=1723881600000&signature=fzUQ9DqK6YAzz7TLl0GWz_HcRFDQkFQKDNBpOE1Ukl4&downloadName=wwlogo.jpg" align="center" width="200px;" alt=""/> </a>

## 💚 규칙
📢 그라운드 룰
	<ul>
	  <li><strong>아침:</strong> 오전 10시 전체 회의</li>
	  <li><strong>스크럼:</strong> 월, 목요일은 11시 15분에 스크럼 진행</li>
	  <li><strong>저녁 회의:</strong> 매일 20시에 오늘 어디까지 진행했는지 간단히 회의</li>
	  <li><strong>점심시간:</strong> 12:00 ~ 13:00</li>
	  <li><strong>저녁시간:</strong> 17:00 ~ 18:30</li>
	  <li><strong>스트레칭:</strong> 한 시간마다 스트레칭 👍</li>
	</ul>


## 💚 기술적 의사결정 (FE | BE)
<details>
  <summary>기술적 의사결정(FE)</summary>
<ul>
  <li><strong>Vite</strong>
    <ul>
      <li>개발 효율성과 속도를 위해 Vite를 선택했습니다. 이는 CRA보다 빌드 속도와 서버 시작 시간이 훨씬 빠릅니다.</li>
    </ul>
  </li>
  <li><strong>TypeScript</strong>
    <ul>
      <li>협업의 필요성으로 인해 동적 타입을 제공하는 JavaScript 대신 정적 타입을 제공하는 TypeScript를 사용했습니다. TypeScript는 코드 오류를 빠르게 잡고 데이터 구조를 명확하게 정의할 수 있어, 가독성과 유지보수성을 높일 수 있습니다.</li>
    </ul>
  </li>
  <li><strong>TanStack Query</strong>
    <ul>
      <li>TanStack Query는 데이터 패칭, 캐싱, 서버 상태 관리를 효율적으로 관리할 수 있어 선택했습니다. 비동기 데이터 관리를 효과적으로 해결할 수 있었기 때문에, 전역 상태 관리를 위한 Redux나 Zustand 같은 라이브러리를 추가할 필요가 없었습니다. 또한, 전역적으로 관리해야 하는 모달 등은 추가 라이브러리 없이 React Portal과 커스텀 훅을 사용하여 처리했습니다.</li>
    </ul>
  </li>
  <li><strong>Axios</strong>
    <ul>
      <li>Fetch API보다 다양한 기능을 제공하고, 복잡한 HTTP 요청을 보다 쉽게 처리할 수 있어 Axios를 사용했습니다.</li>
    </ul>
  </li>
  <li><strong>Styled-components</strong>
    <ul>
      <li>스타일링은 유지보수성과 가독성 문제로 Tailwind CSS 대신 Styled-components를 선택했습니다. 이 라이브러리를 통해 컴포넌트 기반으로 CSS를 작성할 수 있으며, 고유한 클래스 이름 생성으로 CSS 충돌을 방지하고 재사용성을 높일 수 있습니다. 또한, theme 설정이 가능하다는 장점이 있습니다.</li>
    </ul>
  </li>
  <li><strong>React Router</strong>
    <ul>
      <li>React 환경에서 라우팅과 페이지 설계를 간편하게 처리할 수 있는 React Router를 사용했습니다. 이 라이브러리는 SPA(Single Page Application)에서 페이지 간 네비게이션을 쉽게 관리할 수 있으며, Layout, Outlet 등의 기능을 제공합니다.</li>
    </ul>
  </li>
  <li><strong>Vercel</strong>
    <ul>
      <li>배포는 빠르고 간편하며, 자동화된 CI/CD를 제공하는 Vercel을 사용하여 개발과 운영 효율성을 높였습니다.</li>
    </ul>
  </li>
  <li><strong>Yarn</strong>
    <ul>
      <li>패키지 관리는 npm 대신 속도와 안정성 측면에서 뛰어난 Yarn을 선택했습니다.</li>
    </ul>
  </li>
</ul>


</details>
<details>
  <summary>기술적 의사결정(BE)  </summary>
<ul>
  <li><strong>Redis</strong>
    <ul>
      <li>Redis는 캐시 역할을 하는 데이터베이스로 높은 성능과 빠른 읽기/쓰기를 지원합니다. 이를 활용하여 반복적인 데이터 조회를 빠르게 수행하여 성능 최적화에 기여합니다.</li>
    </ul>
  </li>
  <li><strong>Github Actions</strong>
    <ul>
      <li>Github Actions는 CI/CD 파이프라인을 자동화하는 도구입니다. 소프트웨어 개발에서 일관성을 유지하고, 코드 변경을 빠르게 검토할 수 있도록 자동 배포 작업을 수행합니다.</li>
    </ul>
  </li>
  <li><strong>Swagger</strong>
    <ul>
      <li>Swagger는 API의 문서화 및 설계를 지원하는 도구입니다. API 명세를 UI 형식으로 빠르게 작성하여 개발 과정에서 상호간의 명확한 이해를 돕습니다. 이를 통해 API 설계의 일관성을 보장하고 커뮤니케이션을 개선할 수 있습니다.</li>
    </ul>
  </li>
  <li><strong>JMeter</strong>
    <ul>
      <li>JMeter는 성능 테스트 및 부하 테스트를 수행하는 오픈소스 도구입니다. 대규모 사용자에 대한 테스트를 진행하고 트래픽을 시뮬레이션하는데 유용하며, 다양한 결과와 처리량, 응답 시간 등을 분석할 수 있습니다.</li>
    </ul>
  </li>
  <li><strong>Oauth</strong>
    <ul>
      <li>로그인 및 회원 가입의 경우, 카카오 계정의 자원을 사용할 수 있도록 Oauth를 활용했습니다. 이를 통해 제3자 애플리케이션에 접근하여 사용자 정보를 받아와 처리할 수 있습니다.</li>
    </ul>
  </li>
  <li><strong>Scrimage</strong>
    <ul>
      <li>크기가 크고 용량이 많은 이미지를 사용하는 앱의 특성을 유지하면서, 이미지를 효율적으로 저장하기 위해 WEBP로 이미지 변환을 수행했습니다.</li>
    </ul>
  </li>
  <li><strong>Amazon S3</strong>
    <ul>
      <li>트래픽 증가에 따른 장비 증설을 Amazon S3가 대행합니다. 또한, 파일에 대한 접근 권한을 지정하여 서비스를 호스팅 용도로 사용하는 것을 방지합니다.</li>
    </ul>
  </li>
  <li><strong>ELB / Auto Scaling</strong>
    <ul>
      <li>CPU, 메모리, 디스크, 네트워크 트래픽 등 시스템 자원을 모니터링하며 서버 사이즈를 자동으로 조절하는 서비스입니다. Cloud Computing의 장점인 ‘필요에 맞는 빠른 서비스 확장 및 축소’ 기능을 활용했습니다.</li>
    </ul>
  </li>
</ul>

</details>

## 💚 기술 아키텍처
<img src="https://file.notion.so/f/f/83c75a39-3aba-4ba4-a792-7aefe4b07895/b5b1d229-6c50-42bf-86cb-b8383c3ab6c0/image.png?table=block&id=ba04be01-f5a2-46f9-ad38-7f3c09b7f4d4&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&expirationTimestamp=1723874400000&signature=Upc2ig3DPDg5VIeCstwjaNZ2MynIhh6n0BZqRX4fJ8o&downloadName=image.png" width="800px;" alt=""/>


## 💚 주요 기능
<details>
  <summary>⭐ 소셜 로그인</summary>
	<div>
	👉 회원가입 시, 발생되는 불편함을 해소하기 위해 소셜 로그인 기능을 이용할 수 있습니다.
	</div>
	<img src="https://github.com/user-attachments/assets/89291d65-25a5-44a7-8a7f-6a9733a9148d" alt="소셜 로그인 GIF">
</details>

<details>
  <summary>⭐ 날씨 정보</summary>
	<div>    
	👉 사용자 위치 기반으로 날씨 정보를 얻을 수 있습니다. 카카오 맵을 통해 원하는 지역을 선택하거나 검색하면 그 지역의 날씨 정보도 얻을 수 있습니다. 
    	날씨 정보를 바탕으로 오늘의 날씨를 브리핑하고, 기온에 맞는 옷을 추천해주는 기능이 있습니다.
	</div>
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/de73ebae-f857-41e0-8f87-1dc9c5d7c20f">
</details>
    
<details>
  <summary>⭐ 사용자 맞춤 옷 추천</summary>
	<div>    
    	👉 외출하기 전, “오늘 같은 날씨에는 무슨 옷을 입을까”에 대한 고민을 해결하기 위해 오늘의 날씨 데이터, 내 옷장에 등록된 옷, 비슷한 날씨에 내가 입었던 옷차림, 다른 사용자의 옷차림 데이터를 기반으로 나만의 맞춤 옷차림을 추천합니다.
	</div>
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/f04d4ea1-91b4-4848-ba7e-dc0ba4196295">
</details>

<details>
  <summary>⭐ 위시리시트</summary>
	<div>    
    	👉 네이버 쇼핑 API를 기반으로 현재 날씨에 맞는 옷을 사용자에게 추천합니다. 마음에 드는 아이템은 하트를 눌러 위시리스트에 저장할 수 있습니다. 위시리스트는 사용자가 담은 아이템을 편리하게 쇼핑할 수 있도록 옷에 대한 정보와 구매 링크를 제공합니다.
	</div>
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/54f186fe-19d0-442a-b790-3b09a5f0a14a">
</details>

<details>
  <summary>⭐ 비밀번호 찾기</summary>
	<div>    
    	    👉 사용자가 비밀번호를 잊어버린 경우, 문자를 통해서 비밀번호를 찾을 수 있습니다.
	</div>
</details>    

<details>
  <summary>⭐ 게시판 & 댓글</summary>
	<div>    
    	👉 사용자는 OOTD(outfit of the day, 오늘의 옷 차림)를 등록하여 다른 사용자와 공유할 수 있습니다. 게시물에 대한 의견을 자유롭게 댓글로 작성할 수 있습니다.
	</div>
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/e4f838bc-d6b6-4755-a1ad-f9a9abff0df8">
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/f88f1c00-8783-4d79-9541-a1733533dee0">
</details>

<details>
  <summary>⭐ 검색 기능</summary>
	<div>    
    	    👉 사용자가 원하는 정보를 쉽게 찾고 검색 경험을 더욱 만족스럽게 느낄 수 있도록
    각 페이지에 맞는 키워드로 검색, 날씨 아이콘으로 검색, 옷 종류-컬러로 검색하는 기능을 제공합니다.
	</div>
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/3716661e-d560-4a82-88cd-2cd0f18c1756">
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/11f219e2-9eca-49f9-aeed-72a82e001104">
	<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://github.com/user-attachments/assets/139cbd36-b5b5-484b-b40d-4b8ff52cb373">
</details>

## 💚 Trouble Shooting
<details>
  <summary>⭐ FE </summary>

  - **메인 페이지 진입 시 무한 렌더링 발생**
    
    <aside>
    💡 `문제점` : 메인 페이지 진입시 무한 렌더링이 발생하여 브라우저가 심하게 버벅이는 현상이 있었음메인 페이지에서 추천 api의 응답 데이터는 모두 배열로,  각 추천 섹션 컴포넌트의 props로 전달되고 있는 상황이었음조건에 일치하는 요소는 다 배열에 넣어져 응답 값으로 오고 있기 때문에 각 섹션별로 화면에 렌더링해야할 number값 으로 랜덤 요소가 뽑힐 때 까지 while문과 set을 사용하여 필요한 인덱스 만큼 랜덤 배열을 새로 생성하는 작업을 했었음
    
    `원인` : 하지만 사용자 위치 기반 날씨 정보에 따라 추천 api에 전달되는 코드 값이 달라지기 때문에 어떤 때는 배열 안에 든 요소가 많고 어떤 때는 빈 배열이거나 한 두개의 요소만 배열에 들어 있는 것을 확인함기존에 설정해 둔 값 보다 적은 빈 배열, 또는 index 수가 부족한 배열이 응답 데이터로 왔기 때문에 기작성한 while문을 사용할 경우 무한 렌더링이 발생할 수 밖에 없었음
    
    `해결방법` : 각 추천 섹션별 조건문 처리 및 slice함수를 사용하여 필요한 만큼의 인덱스만 잘라서 사용하도록 수정하여 해결함이 문제를 해결하며 배열의 특징과 각 메서드의 사용법을 보다 자세히 알게되었음
    
    </aside>
	
</details>
<details>
  <summary>⭐ BE </summary>
	
- **로그인 이후에도 401 오류 발생**
    
    <aside>
    💡 `문제점` : 로그인을 한 이후에도 특정한 오류 상황을 만나면 401에러가 나타나는 현상을 발견함. 모든 에러가 `AuthenticationEntryPoint` 로 이어지게 되면서 올바른 오류를 확인하지 못하는 문제점이 발생
    
    `원인` : `GlobalExceptionHandler`를 설정하고 전역 예외 처리를 진행했지만 여기에 해당하지 않는 오류의 경우 `AuthenticationEntryPoint` 에서 로그가 나타나는 것을 확인함
    
    `해결방법` : `GlobalExceptionHandler` 에 예외로 설정하지 않은 오류 상황에 대해 오류 메시지를 반환하도록 처리하여 개발 과정에 오류를 빠르게 확인할 수 있도록 수정
    
    </aside>
    
- **이미지 이름의 보안 처리**
    
    <aside>
    💡 `문제점` : 게시물 ID만으로 비공개 게시물도 이미지에 접근할 수 있는 문제 발생
    
     유추 가능한 정보가 이미지와 같은 파일 정보에 포함될 경우, 비공개의 의미가 없어져 보안 취약점이 드러남
    
    `원인` : 이미지 url의 중복을 제거하기 위해서 게시물 ID를 사용했기 때문
    
    `해결방법` : 이미지 이름에 **UUID**를 적용해 난수화하고, 이미지 업로드 전에 동일한 이름의 이미지 ID를 확인해 중복이 이러나지 않도록 조치
    
    </aside>
    
- **네이버 API 고갈 현상**
    
    <aside>
    💡 `문제점` : 네이버 쇼핑 API의 일 사용량 25000회를 모두 사용해 이후 요청을 할 수 없는 문제가 발생함.
    
    `원인` : 네이버 쇼핑 API는 사용자 당 한 번 페이지를 호출할 때마다 5회씩(성별과 옷 타입 조합) 호출하며 페이지에 많이 접근할 경우 API가 빠르게 고갈되고 API 응답에 많은 시간이 걸림을 확인
    
    `해결방법` : 네이버 쇼핑 API의 쿼리는 일정한 조합의 형태이기 때문에 API 결과가 사용자별로 일정할 수 있다고 판단, 결과를 Redis에 저장하되 1시간 후 새롭게 갱신될 수 있도록 설정하여 호출 횟수를 줄이고 빠르게 결과를 반환할 수 있도록 개선함
    
    </aside>
    
- **CORS 관련 접근 문제**
    
    <aside>
    💡 `문제점` : 프론트에서 백엔드로 요청시 CORS 오류가 나타나는 문제
    
    `원인` : CORS는 오류의 원인은 HTTPS 환경에서 HTTP 요청을 보내려 했기 때문에 규약 위반으로 오류가 나타남. 확인 결과 HTTPS인 프론트의 환경에서 HTTP 요청을 보내는게 확인됨
    
    `해결방법` : 백엔드에서 HTTPS를 처리할 수 있도록 로드밸런서에 SSL 인증서를 설치하였고, Nginx를 통해 해당 응답을 EC2에서 받을 수 있도록 조치하여 프론트엔드에서 HTTPS 요청을 보내도 서버에 정상적으로 도착할 수 있도록 설정
    
    </aside>
    
- **form-data 처리**
    
    <aside>
    💡 `문제점` : 데이터 전송 시 Long 타입으로 입력 받으니 문제가 발생함을 확인
    
    `해결방법` : String으로 값을 전달받아 형변환을 통해 문제를 처리함
    </aside>
<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://file.notion.so/f/f/83c75a39-3aba-4ba4-a792-7aefe4b07895/b921b122-388d-422e-8fb5-17891554b63a/image.png?table=block&id=d0fafc7e-bce6-4ee2-9964-f247aab89111&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&expirationTimestamp=1723881600000&signature=cU-4N8e_0yhfk1uOwhrbyEz0joV9vNJaAk-IYTCHu8Y&downloadName=image.png">

<img width="1421" alt="스크린샷 2024-08-14 오전 10 44 04" src="https://file.notion.so/f/f/83c75a39-3aba-4ba4-a792-7aefe4b07895/e2f975a1-bbd9-4282-92b4-915b5f0cc735/image.png?table=block&id=a68dc6e7-8151-4b2e-a6d6-e7f1d5d918e2&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&expirationTimestamp=1723881600000&signature=ot0HVKdo7NledCGCQ_6iTEc4D6yPel_YiMCIqutd_us&downloadName=image.png">

    
- **추천 아이템 소요시간 문제**
    
    <aside>
    💡 `문제점` : 추천 아이템을 데이터베이스에서 선정하면서 너무 많은 시간이 소요되는 것을 확인함
    
    `원인` : 아이템 선정의 과정에 중복 제거를 하면서 XOR 연산이 반복적으로 수행되고 전체 아이템 수가 증가하면서 연산 횟수가 급격히 많아짐
    
    `해결방법` : 아이템 선정 방식을 점수제로 변경함. 아이템의 좋아요, 댓글 수, 조회 수를 적절하게 조합해 점수를 만들고 상위 9개를 선정하는 방식을 채택하여 소요 시간을 단축함
    
    </aside>
    
- **net::ERR_CERT_COMMON_NAME_INVALID**
    
    <aside>
    💡 `문제점` : 프론트에서 모든 요청이 net::ERR_CERT_COMMON_NAME_INVALID로 나타나며 요청이 올바르게 서버로 전달되지 않는 문제 발생
    
    `원인` : 프로젝트의 도메인 설계 문제를 확인함. 하나의 도메인 주소에 프론트 엔드와 백엔드 모두 사용하면서 도메인을 로드밸런서와 연결하는데 사용함. 때문에 인증서 CN과 경로 설정 등 다양한 부분에 문제가 발생하여 오류를 반환되는 것이 확이됨. 로드밸런서가 적절하게 연결이 되지 않으며 DNS가 그대로 노출되어 사용되었으며 로드밸런서 내에서도 요청이 올바르게 EC2에 전달되지 않는 등의 문제도 확인함.
    
    `해결방법` : 도메인을 두 개 설정하고 하나의 도메인을 백엔드 API를 처리할 수 있도록 처음부터 하나씩 다시 설계함. 도메인을 로드밸런서의 입구로 사용하도록 만들어서 DNS가 노출되지 않도록 만들고 로드밸런서의 요청을 EC2에서 처리할 수 있도록 Nginx 설정을 추가함.
    
    </aside>
</details>

## 💚 발표 자료
📕📗 [WeatherWear.pdf](https://github.com/user-attachments/files/16633816/WeatherWear.4.pdf)
